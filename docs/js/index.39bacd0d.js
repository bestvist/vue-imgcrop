(function(t){function e(e){for(var i,n,c=e[0],s=e[1],p=e[2],d=0,h=[];d<c.length;d++)n=c[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&h.push(a[n][0]),a[n]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);l&&l(e);while(h.length)h.shift()();return r.push.apply(r,p||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],i=!0,c=1;c<o.length;c++){var s=o[c];0!==a[s]&&(i=!1)}i&&(r.splice(e--,1),t=n(n.s=o[0]))}return t}var i={},a={index:0},r=[];function n(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=i,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/vue-imgcrop/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var p=0;p<c.length;p++)e(c[p]);var l=s;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("2256")},"10e0":function(t,e,o){var i=o("5ab0");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("6ce28d96",i,!0,{sourceMap:!1,shadowMode:!1})},2256:function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("h2",[t._v("本地裁剪")]),o("div",{staticClass:"content"},[o("div",{staticClass:"avatar"},[o("img",{attrs:{src:t.avatar}})]),o("button",{on:{click:function(e){t.visible=!0}}},[t._v("上传")])]),t.visible?o("div",{staticClass:"upload"},[o("div",{staticClass:"upload-cover"}),o("div",{staticClass:"upload-dialog"},[o("div",{staticClass:"title"},[t._v("图片裁剪"),o("span",{staticClass:"icon-close",on:{click:function(e){return t.close()}}})]),o("div",{staticClass:"upload-wrap"},[o("VueImgCrop",{on:{change:t.handleAvatar}}),o("button",{staticClass:"save-btn",on:{click:t.handleSave}},[t._v("保存")])],1)])]):t._e()])},r=[],n=o("d4ec"),c=o("bee2"),s=o("262e"),p=o("2caf"),l=o("9ab4"),d=o("60a3"),h=(o("b0c0"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"local-upload"},[o("div",{staticClass:"local-wrap",on:{drop:t.handleSelectFile,dragover:function(t){return t.preventDefault()}}},["select"===t.uploadStatus?o("div",[o("div",{staticClass:"upload-select"},[o("label",{staticClass:"upload-select__inner",attrs:{for:"imgUpload-file0"}},[t._v(" 选择图片 "),o("input",{attrs:{name:"file",type:"file",id:"imgUpload-file0",accept:"image/jpg,image/jpeg,image/png,image/bmp"},on:{change:t.handleSelectFile}})])]),o("p",{staticClass:"tip-limit"},[t._v("仅支持JPG、PNG，大小不超过10M")])]):t._e(),"preview"===t.uploadStatus?o("div",{staticClass:"local-wrap__img"},[o("ImgCrop",{attrs:{src:t.imgSrc},on:{change:t.hanldeEdit}})],1):t._e()])])}),u=[],f=(o("c975"),o("d3b7"),o("ac1f"),o("3ca3"),o("1276"),o("ddb0"),o("2b3d"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"crop-img"},[o("div",{ref:"cropWrap",staticClass:"crop-wrap",style:t.wrapStyle},[t.src?o("img",{attrs:{src:t.src}}):t._e(),o("div",{staticClass:"crop-box",style:t.cropBoxStyle},[o("div",{staticClass:"crop-box__move",on:{mouseup:t.cropMoveEnd,mousedown:t.cropMoveStart,mousemove:t.cropMove,mouseout:t.cropMoveEnd}}),o("div",{staticClass:"zoom-box",on:{mousedown:t.zoomMoveStart}})]),o("div",{staticClass:"cover-wrap"},t._l(t.coverBoxs,(function(t,e){return o("div",{key:e,staticClass:"cover-box",style:t})})),0)])])}),v=[],g=(o("4160"),o("3410"),o("159b"),{});g.toString;function x(t){return t<0?0:t}"Boolean Number String Function Array Date RegExp Object Error".split(" ").forEach((function(t){g["[object "+t+"]"]=t.toLowerCase()}));var b=110,m={top:23,left:40,width:150,height:150,x:0,y:0,isMove:!1},w=function(t){Object(s["a"])(o,t);var e=Object(p["a"])(o);function o(){var t;return Object(n["a"])(this,o),t=e.apply(this,arguments),t.imgData="",t.minSize=b,t.container={width:416,height:310},t.wrapBox={top:0,width:0,height:0,x:0,y:0},t.originImg=null,t.scale={width:0,height:0,ratio:1},t.cropBox=Object.assign({},m),t.zoomBox={x:0,y:0,isMove:!1},t.coverBoxs={top:{left:"40px",width:"150px",height:"50px"},right:{left:"190px",width:"200px"},bottom:{top:"180px",left:"40px",width:"150px",height:"60px"},left:{width:"40px"}},t}return Object(c["a"])(o,[{key:"onSrcChange",value:function(t){this.start(t)}},{key:"setWrapBox",value:function(){var t=this.scale,e=this.container;if(!t.width||!t.height)return null;var o,i,a=0;t.width>t.height?(o=e.width,i=Math.floor(e.width*t.height/t.width),a=(e.height-i)/2):(o=Math.floor(e.height*t.width/t.height),i=e.height),this.wrapBox=Object.assign(this.wrapBox,{width:o,height:i,top:a}),t.ratio=t.width/o}},{key:"setWrapPosition",value:function(){var t,e,o=this;this.$nextTick((function(){var i=o.$refs["cropWrap"];if(i){var a=i.getBoundingClientRect();t=a.x||a.left,e=a.y||a.top,o.wrapBox=Object.assign(o.wrapBox,{x:t,y:e})}}))}},{key:"setDefaultCrop",value:function(){var t=this.cropBox,e=this.wrapBox,o=Math.min(e.width,e.height);o<=this.minSize?(t.width=t.height=o,t.top=t.left=0,this.minSize=o):o>this.minSize&&o<t.left+t.width?(t.width=t.height=this.minSize,t.top=t.left=0):(this.cropBox=Object.assign({},m),this.minSize=b)}},{key:"setCoverBox",value:function(){var t=this.coverBoxs,e=this.cropBox,o=this.wrapBox,i=t.top,a=t.right,r=t.bottom,n=t.left;i.left=r.left=n.width=e.left+"px",i.width=r.width=e.width+"px",i.height=e.top+"px",a.left=e.left+e.width+"px",a.width=x(o.width-e.left-e.width)+"px",r.top=e.top+e.height+"px",r.height=x(o.height-e.top-e.height)+"px"}},{key:"createImg",value:function(){var t=this.cropBox,e=this.wrapBox,o=this.originImg,i=document.createElement("canvas"),a=i.getContext("2d");i.width=t.width,i.height=t.height,a.drawImage(o,-t.left,-t.top,e.width,e.height),this.imgData=i.toDataURL()}},{key:"cropMoveStart",value:function(t){t.preventDefault();var e=this.cropBox;e.x=t.screenX,e.y=t.screenY,e.isMove=!0}},{key:"cropMoveEnd",value:function(t){t.preventDefault();var e=this.cropBox;e.isMove=!1}},{key:"cropMove",value:function(t){t.preventDefault();var e=this.cropBox,o=this.wrapBox,i=e.x,a=e.y,r=e.left,n=e.top,c=e.width,s=e.height,p=e.isMove;if(p){var l=t.screenX,d=t.screenY,h=r-(i-l),u=n-(a-d);e.left=h>=0&&h<=o.width-c?h:e.left,e.top=u>=0&&u<=o.height-s?u:e.top,e.x=l,e.y=d,this.setCoverBox(),this.crop()}}},{key:"zoomMoveStart",value:function(t){t.preventDefault(),this.zoomBox.isMove=!0}},{key:"zoomMoveEnd",value:function(t){t.preventDefault(),this.zoomBox.isMove=!1}},{key:"zoomMove",value:function(t){t.preventDefault();var e=this.cropBox,o=this.wrapBox,i=this.zoomBox,a=this.minSize,r=i.isMove,n=e.left,c=e.top;if(r){var s=t.clientX,p=t.clientY,l=s-o.x-n,d=p-o.y-c,h=Math.max(l,d);h>=a&&h<=Math.min(o.width,o.height)&&(e.width=e.height=Math.max(l,d),this.setCoverBox(),this.crop())}}},{key:"crop",value:function(){this.createImg(),this.$emit("change",this.imgData)}},{key:"start",value:function(t){var e=this;if(t){var o=new Image;o.src=t,o.setAttribute("crossOrigin","Anonymous"),o.onload=function(){e.originImg=o;var t=e.scale;t.width=o.width,t.height=o.height,e.setWrapBox(),e.setWrapPosition(),e.setDefaultCrop(),e.setCoverBox(),e.crop()}}}},{key:"mounted",value:function(){this.start(this.src),document.addEventListener("mouseup",this.zoomMoveEnd),document.addEventListener("mousemove",this.zoomMove)}},{key:"destroyed",value:function(){document.removeEventListener("mouseup",this.zoomMoveEnd),document.removeEventListener("mousemove",this.zoomMove)}},{key:"wrapStyle",get:function(){var t=this.wrapBox;return{width:t.width+"px",height:t.height+"px",marginTop:t.top+"px"}}},{key:"cropBoxStyle",get:function(){var t=this.cropBox;return{top:t.top+"px",left:t.left+"px",width:t.width+"px",height:t.height+"px"}}}]),o}(d["c"]);Object(l["a"])([Object(d["b"])()],w.prototype,"src",void 0),Object(l["a"])([Object(d["d"])("src")],w.prototype,"onSrcChange",null),w=Object(l["a"])([d["a"]],w);var y=w,k=y,C=(o("cc7e"),o("2877")),j=Object(C["a"])(k,f,v,!1,null,"f885c70c",null),O=j.exports,M={fileType:["jpg","png","bmp","jpeg"],fileSize:10485760},B=function(t){Object(s["a"])(o,t);var e=Object(p["a"])(o);function o(){var t;return Object(n["a"])(this,o),t=e.apply(this,arguments),t.imgSrc="",t.errorMsg="",t.uploadStatus="select",t}return Object(c["a"])(o,[{key:"hanldeEdit",value:function(t){this.$emit("change",t)}},{key:"handleSelectFile",value:function(t){var e,o=this;if(t.preventDefault(),e="drop"===t.type?t.dataTransfer.files[0]:t.target.files[0],e&&this.validFile(e)){var i=window.URL.createObjectURL(e),a=new Image;a.onload=function(){o.imgSrc=i,o.uploadStatus="preview"},a.src=i}}},{key:"validFile",value:function(t){var e=this,o=!0;this.errorMsg="";var i=t.name.split(".").reverse()[0];if(i||(o=!1,this.errorMsg="上传失败，上传文件类型无法识别"),-1===this.options.fileType.indexOf(i)&&(o=!1,this.errorMsg="上传失败，仅支持JPG、PNG格式"),this.options.fileSize<=t.size&&(o=!1,this.errorMsg="上传失败，图片大小超过10M"),!o){this.uploadStatus="error";var a=setTimeout((function(){e.uploadStatus="select",e.errorMsg="",clearTimeout(a)}),2e3)}return o}}]),o}(d["c"]);Object(l["a"])([Object(d["b"])({default:function(){return M}})],B.prototype,"options",void 0),B=Object(l["a"])([Object(d["a"])({name:"VueImgCrop",components:{ImgCrop:O}})],B);var z=B,S=z,A=(o("4838"),Object(C["a"])(S,h,u,!1,null,"0b1cf0f2",null)),_=A.exports,E=function(t){Object(s["a"])(o,t);var e=Object(p["a"])(o);function o(){var t;return Object(n["a"])(this,o),t=e.apply(this,arguments),t.visible=!1,t.avatar="https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",t.imgData="",t}return Object(c["a"])(o,[{key:"handleAvatar",value:function(t){this.imgData=t}},{key:"handleSave",value:function(){this.avatar=this.imgData,this.visible=!1}},{key:"close",value:function(){this.visible=!1}}]),o}(d["c"]);E=Object(l["a"])([Object(d["a"])({components:{VueImgCrop:_}})],E);var U=E,D=U,L=(o("74b7"),Object(C["a"])(D,a,r,!1,null,"8ed24704",null)),T=L.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(T)}}).$mount("#app")},"467b":function(t,e,o){var i=o("bec9");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("57de1715",i,!0,{sourceMap:!1,shadowMode:!1})},4838:function(t,e,o){"use strict";var i=o("9636"),a=o.n(i);a.a},"5ab0":function(t,e,o){var i=o("24fb"),a=o("1de5"),r=o("ee85");e=i(!1);var n=a(r);e.push([t.i,"#app[data-v-8ed24704]{height:100%;background:#f5f5f5}.content[data-v-8ed24704]{text-align:center}.content .avatar img[data-v-8ed24704]{width:150px;height:150px;border-radius:50%;border:2px solid rgba(0,0,0,.05)}.content button[data-v-8ed24704]{margin-top:30px;padding:5px 30px;border-radius:2px;border:none;font-size:16px;color:#fff;background:#409eff;cursor:pointer}.upload-cover[data-v-8ed24704]{z-index:1000;width:100%;height:100%;opacity:.7;background-color:#000}.upload-cover[data-v-8ed24704],.upload-dialog[data-v-8ed24704]{position:fixed;top:0;right:0;bottom:0;left:0}.upload-dialog[data-v-8ed24704]{z-index:1002;margin:auto;width:546px;height:500px;background:#fff}.upload-wrap[data-v-8ed24704]{padding:0 54px;text-align:center}.upload .title[data-v-8ed24704]{position:relative;font-size:20px;color:#333;padding:19px 0;margin:0 30px;border-bottom:1px solid #f3f3f3}.upload .icon-close[data-v-8ed24704]{cursor:pointer;position:absolute;top:20px;right:-10px;display:block;width:16px;height:16px;background:url("+n+")}.save-btn[data-v-8ed24704]{margin:27px auto 0;width:340px;height:46px;line-height:46px;background:#409eff;border-radius:2px;font-size:16px;color:#fff;text-align:center;border:none;cursor:pointer}.save-btn[data-v-8ed24704]:hover{background:#0d84ff}",""]),t.exports=e},"74b7":function(t,e,o){"use strict";var i=o("10e0"),a=o.n(i);a.a},"7a5f":function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,'.local-upload[data-v-0b1cf0f2]:after{content:"";display:table;clear:both}.local-upload input[type=file][data-v-0b1cf0f2]{position:absolute;top:-9999px;left:-9999px;width:0;height:0;opacity:0}.local-wrap[data-v-0b1cf0f2]{width:416px;height:310px;border:1px solid #ececec;float:left;background:#f5f5f5}.local-wrap__img[data-v-0b1cf0f2]{position:relative;width:416px;height:310px;margin:auto;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.upload-select[data-v-0b1cf0f2]{margin:117px auto 20px;width:136px;height:40px;background:#fff;box-shadow:0 0 10px 0 hsla(0,0%,83.5%,.5);border-radius:2px}.upload-select__inner[data-v-0b1cf0f2]{display:block;width:136px;height:40px;cursor:pointer;line-height:40px;text-align:center;font-size:14px;color:#409eff}.upload-select__inner[data-v-0b1cf0f2]:hover{background:#f3f9ff}.tip-limit[data-v-0b1cf0f2]{margin:0;font-size:14px;color:#666;text-align:center}',""]),t.exports=e},9636:function(t,e,o){var i=o("7a5f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("bb6a02a2",i,!0,{sourceMap:!1,shadowMode:!1})},bec9:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,".crop-img[data-v-f885c70c],.crop-img img[data-v-f885c70c]{width:100%;height:100%}.crop-wrap[data-v-f885c70c]{height:100px;position:relative;margin:auto;box-sizing:border-box;background:#ccc}.crop-wrap img[data-v-f885c70c]{width:100%;height:100%}.crop-box[data-v-f885c70c]{position:absolute;z-index:2}.crop-box__move[data-v-f885c70c]{width:100%;height:100%;border:2px solid hsla(0,0%,100%,.6);box-sizing:border-box;cursor:move}.crop-box .zoom-box[data-v-f885c70c]{position:absolute;right:-3px;bottom:-3px;width:5px;height:5px;background:#fff;cursor:se-resize}.cover-wrap[data-v-f885c70c]{left:0;width:100%;background:transparent;z-index:1}.cover-box[data-v-f885c70c],.cover-wrap[data-v-f885c70c]{position:absolute;top:0;height:100%}.cover-box[data-v-f885c70c]{background:rgba(0,0,0,.5)}",""]),t.exports=e},cc7e:function(t,e,o){"use strict";var i=o("467b"),a=o.n(i);a.a},ee85:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAARNJREFUeNptj20rRFEUhY/XMozXQaLJN03JTET5X/waJUV7XVuD20wyutMoirx8EBERPiBJ8guudU7duWO6+8Nu7/Wss3bHyAwq5QGTUNtDCLRgUJUQ59rXjHUYVySBKWVwzeHUTzdiGcUN1UsdtFEjuOVyrD0RLo7JHZWznf66gHsJ5bCUctuEPBCf/Dur43ikWNUuzcoTzUfRydiSxbO1yAt7rdKd8C1M4lVC4oCnkkqn8OYM/kVHAvZy+CA8kHf2Yq29GU/LJ8Gudno5N21qW2N4Qb4objHame0mG2FrhOfwTQFxrJe3CtbCFosX5IfLehzpLLNWlRVaUOawWo+LLfPyy4dLxk97y/QllC7K/l7vH26Cp59gcejfAAAAAElFTkSuQmCC"}});