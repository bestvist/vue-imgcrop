(function(t){function e(e){for(var i,n,c=e[0],s=e[1],l=e[2],u=0,d=[];u<c.length;u++)n=c[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&d.push(a[n][0]),a[n]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);p&&p(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],i=!0,c=1;c<o.length;c++){var s=o[c];0!==a[s]&&(i=!1)}i&&(r.splice(e--,1),t=n(n.s=o[0]))}return t}var i={},a={index:0},r=[];function n(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=i,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/vue-imgcrop/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var p=s;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("2256")},"20ff":function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,"#app[data-v-770f8b70]{height:100%;padding:50px;background:#f5f5f5;text-align:center}#app h2[data-v-770f8b70]{color:#333}.content .avatar img[data-v-770f8b70]{width:150px;height:150px;border-radius:50%;border:2px solid rgba(0,0,0,.05)}.content button[data-v-770f8b70]{margin-top:30px;padding:5px 30px;border-radius:2px;border:none;font-size:16px;color:#fff;background:#409eff;cursor:pointer}",""]),t.exports=e},2256:function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("h2",[t._v("本地裁剪")]),o("div",{staticClass:"content"},[o("div",{staticClass:"avatar"},[o("img",{attrs:{src:t.avatar}})]),o("button",{on:{click:function(e){t.visible=!0}}},[t._v("上传")])]),o("VueImgCrop",{attrs:{size:10},on:{save:t.save,close:t.close},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}})],1)},r=[],n=o("d4ec"),c=o("bee2"),s=o("262e"),l=o("2caf"),p=o("9ab4"),u=o("60a3"),d=(o("b0c0"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.value?o("div",{staticClass:"upload"},[o("div",{staticClass:"upload-cover"}),o("div",{staticClass:"upload-dialog"},[o("div",{staticClass:"title"},[t._v("图片裁剪"),o("span",{staticClass:"icon-close",on:{click:function(e){return t.handleClose()}}})]),o("div",{staticClass:"upload-wrap"},[o("Upload",{attrs:{format:t.format,size:t.size},on:{change:t.handleAvatar}}),o("button",{staticClass:"save-btn",on:{click:t.handleSave}},[t._v("保存")])],1)])]):t._e()}),h=[],f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"local-upload"},[o("div",{staticClass:"local-wrap",on:{drop:t.handleSelectFile,dragover:function(t){return t.preventDefault()}}},["select"===t.uploadStatus?o("div",[o("div",{staticClass:"upload-select"},[o("label",{staticClass:"upload-select__inner",attrs:{for:"imgUpload-file0"}},[t._v(" 选择图片 "),o("input",{attrs:{name:"file",type:"file",id:"imgUpload-file0"},on:{change:t.handleSelectFile}})])]),o("p",{staticClass:"tip-limit"},[t._v("仅支持"+t._s(t.limitFileType)+"，大小不超过"+t._s(t.limitFileSize))])]):"error"===t.uploadStatus?o("div",{staticClass:"tip-error"},[t._v(" "+t._s(t.errorMsg)+" ")]):"preview"===t.uploadStatus?o("div",{staticClass:"local-wrap__img"},[o("ImgCrop",{attrs:{src:t.imgSrc},on:{change:t.hanldeEdit}})],1):t._e()])])},v=[],g=(o("c975"),o("a15b"),o("d3b7"),o("ac1f"),o("3ca3"),o("1276"),o("ddb0"),o("2b3d"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"crop-img"},[o("div",{ref:"cropWrap",staticClass:"crop-wrap",style:t.wrapStyle},[t.src?o("img",{attrs:{src:t.src}}):t._e(),o("div",{staticClass:"crop-box",style:t.cropBoxStyle},[o("div",{staticClass:"crop-box__move",on:{mouseup:t.cropMoveEnd,mousedown:t.cropMoveStart,mousemove:t.cropMove,mouseout:t.cropMoveEnd}}),o("div",{staticClass:"zoom-box",on:{mousedown:t.zoomMoveStart}})]),o("div",{staticClass:"cover-wrap"},t._l(t.coverBoxs,(function(t,e){return o("div",{key:e,staticClass:"cover-box",style:t})})),0)])])}),b=[],x=110,m={top:23,left:40,width:150,height:150,x:0,y:0,isMove:!1},w=function(t){Object(s["a"])(o,t);var e=Object(l["a"])(o);function o(){var t;return Object(n["a"])(this,o),t=e.apply(this,arguments),t.imgData="",t.minSize=x,t.container={width:416,height:310},t.wrapBox={top:0,width:0,height:0,x:0,y:0},t.originImg=null,t.scale={width:0,height:0,ratio:1},t.cropBox=Object.assign({},m),t.zoomBox={x:0,y:0,isMove:!1},t.coverBoxs={top:{left:"40px",width:"150px",height:"50px"},right:{left:"190px",width:"200px"},bottom:{top:"180px",left:"40px",width:"150px",height:"60px"},left:{width:"40px"}},t}return Object(c["a"])(o,[{key:"onSrcChange",value:function(t){this.start(t)}},{key:"setWrapBox",value:function(){var t=this.scale,e=this.container;if(!t.width||!t.height)return null;var o,i,a=0;t.width>t.height?(o=e.width,i=Math.floor(e.width*t.height/t.width),a=(e.height-i)/2):(o=Math.floor(e.height*t.width/t.height),i=e.height),this.wrapBox=Object.assign(this.wrapBox,{width:o,height:i,top:a}),t.ratio=t.width/o}},{key:"setWrapPosition",value:function(){var t,e,o=this;this.$nextTick((function(){var i=o.$refs["cropWrap"];if(i){var a=i.getBoundingClientRect();t=a.x||a.left,e=a.y||a.top,o.wrapBox=Object.assign(o.wrapBox,{x:t,y:e})}}))}},{key:"setDefaultCrop",value:function(){var t=this.cropBox,e=this.wrapBox,o=Math.min(e.width,e.height);o<=this.minSize?(t.width=t.height=o,t.top=t.left=0,this.minSize=o):o>this.minSize&&o<t.left+t.width?(t.width=t.height=this.minSize,t.top=t.left=0):(this.cropBox=Object.assign({},m),this.minSize=x)}},{key:"setCoverBox",value:function(){function t(t){return t<0?0:t}var e=this.coverBoxs,o=this.cropBox,i=this.wrapBox,a=e.top,r=e.right,n=e.bottom,c=e.left;a.left=n.left=c.width=o.left+"px",a.width=n.width=o.width+"px",a.height=o.top+"px",r.left=o.left+o.width+"px",r.width=t(i.width-o.left-o.width)+"px",n.top=o.top+o.height+"px",n.height=t(i.height-o.top-o.height)+"px"}},{key:"createImg",value:function(){var t=this.cropBox,e=this.wrapBox,o=this.originImg,i=document.createElement("canvas"),a=i.getContext("2d");i.width=t.width,i.height=t.height,a.drawImage(o,-t.left,-t.top,e.width,e.height),this.imgData=i.toDataURL()}},{key:"cropMoveStart",value:function(t){t.preventDefault();var e=this.cropBox;e.x=t.screenX,e.y=t.screenY,e.isMove=!0}},{key:"cropMoveEnd",value:function(t){t.preventDefault();var e=this.cropBox;e.isMove=!1}},{key:"cropMove",value:function(t){t.preventDefault();var e=this.cropBox,o=this.wrapBox,i=e.x,a=e.y,r=e.left,n=e.top,c=e.width,s=e.height,l=e.isMove;if(l){var p=t.screenX,u=t.screenY,d=r-(i-p),h=n-(a-u);e.left=d>=0&&d<=o.width-c?d:e.left,e.top=h>=0&&h<=o.height-s?h:e.top,e.x=p,e.y=u,this.setCoverBox(),this.crop()}}},{key:"zoomMoveStart",value:function(t){t.preventDefault(),this.zoomBox.isMove=!0}},{key:"zoomMoveEnd",value:function(t){t.preventDefault(),this.zoomBox.isMove=!1}},{key:"zoomMove",value:function(t){t.preventDefault();var e=this.cropBox,o=this.wrapBox,i=this.zoomBox,a=this.minSize,r=i.isMove,n=e.left,c=e.top;if(r){var s=t.clientX,l=t.clientY,p=s-o.x-n,u=l-o.y-c,d=Math.max(p,u);d>=a&&d<=Math.min(o.width-n,o.height-c)&&(e.width=e.height=Math.max(p,u),this.setCoverBox(),this.crop())}}},{key:"crop",value:function(){this.createImg(),this.$emit("change",this.imgData)}},{key:"start",value:function(t){var e=this;if(t){var o=new Image;o.src=t,o.setAttribute("crossOrigin","Anonymous"),o.onload=function(){e.originImg=o;var t=e.scale;t.width=o.width,t.height=o.height,e.setWrapBox(),e.setWrapPosition(),e.setDefaultCrop(),e.setCoverBox(),e.crop()}}}},{key:"mounted",value:function(){this.start(this.src),document.addEventListener("mouseup",this.zoomMoveEnd),document.addEventListener("mousemove",this.zoomMove)}},{key:"destroyed",value:function(){document.removeEventListener("mouseup",this.zoomMoveEnd),document.removeEventListener("mousemove",this.zoomMove)}},{key:"wrapStyle",get:function(){var t=this.wrapBox;return{width:t.width+"px",height:t.height+"px",marginTop:t.top+"px"}}},{key:"cropBoxStyle",get:function(){var t=this.cropBox;return{top:t.top+"px",left:t.left+"px",width:t.width+"px",height:t.height+"px"}}}]),o}(u["e"]);Object(p["a"])([Object(u["d"])()],w.prototype,"src",void 0),Object(p["a"])([Object(u["f"])("src")],w.prototype,"onSrcChange",null),w=Object(p["a"])([u["a"]],w);var y=w,O=y,j=(o("b5ea"),o("2877")),k=Object(j["a"])(O,g,b,!1,null,"c94c68cc",null),C=k.exports,z=function(t){Object(s["a"])(o,t);var e=Object(l["a"])(o);function o(){var t;return Object(n["a"])(this,o),t=e.apply(this,arguments),t.imgSrc="",t.errorMsg="",t.uploadStatus="select",t}return Object(c["a"])(o,[{key:"hanldeEdit",value:function(t){this.$emit("change",t)}},{key:"handleSelectFile",value:function(t){var e,o=this;if(t.preventDefault(),e="drop"===t.type?t.dataTransfer.files[0]:t.target.files[0],e&&this.validFile(e)){var i=window.URL.createObjectURL(e),a=new Image;a.onload=function(){o.imgSrc=i,o.uploadStatus="preview"},a.src=i}}},{key:"validFile",value:function(t){var e,o=this,i=!0;this.errorMsg="";var a,r=t.name.split(".").reverse()[0];(r||(i=!1,this.errorMsg="上传失败，上传文件类型无法识别"),-1===(null===(e=this.format)||void 0===e?void 0:e.indexOf(r)))&&(i=!1,this.errorMsg="上传失败，仅支持"+(null===(a=this.format)||void 0===a?void 0:a.join("、").toUpperCase())+"格式");if(1024*(this.size||5)*1024<t.size&&(i=!1,this.errorMsg="上传失败，图片大小超过"+this.size+"M"),!i){this.uploadStatus="error";var n=setTimeout((function(){o.uploadStatus="select",o.errorMsg="",clearTimeout(n)}),2e3)}return i}},{key:"limitFileType",get:function(){var t;return null===(t=this.format)||void 0===t?void 0:t.join("、").toUpperCase()}},{key:"limitFileSize",get:function(){return this.size+"M"}}]),o}(u["e"]);Object(p["a"])([Object(u["d"])({required:!0})],z.prototype,"format",void 0),Object(p["a"])([Object(u["d"])({required:!0})],z.prototype,"size",void 0),z=Object(p["a"])([Object(u["a"])({components:{ImgCrop:C}})],z);var M=z,B=M,S=(o("58d0"),Object(j["a"])(B,f,v,!1,null,"505b6920",null)),_=S.exports,A={format:["jpg","png","bmp","jpeg"],size:5},U=function(t){Object(s["a"])(o,t);var e=Object(l["a"])(o);function o(){var t;return Object(n["a"])(this,o),t=e.apply(this,arguments),t.imgData="",t}return Object(c["a"])(o,[{key:"input",value:function(t){return t}},{key:"save",value:function(){return this.imgData}},{key:"close",value:function(){return!1}},{key:"handleAvatar",value:function(t){this.imgData=t}},{key:"handleSave",value:function(){this.save(),this.input(!1)}},{key:"handleClose",value:function(){this.input(!1),this.close()}}]),o}(u["e"]);Object(p["a"])([Object(u["d"])({default:function(){return A.format}})],U.prototype,"format",void 0),Object(p["a"])([Object(u["d"])({default:function(){return A.size}})],U.prototype,"size",void 0),Object(p["a"])([Object(u["c"])("input",{type:Boolean})],U.prototype,"value",void 0),Object(p["a"])([Object(u["b"])("input")],U.prototype,"input",null),Object(p["a"])([Object(u["b"])()],U.prototype,"save",null),Object(p["a"])([Object(u["b"])()],U.prototype,"close",null),U=Object(p["a"])([Object(u["a"])({name:"VueImgCrop",components:{Upload:_}})],U);var E=U,D=E,L=(o("474a"),Object(j["a"])(D,d,h,!1,null,"cf60fe18",null)),T=L.exports,F=function(t){Object(s["a"])(o,t);var e=Object(l["a"])(o);function o(){var t;return Object(n["a"])(this,o),t=e.apply(this,arguments),t.visible=!1,t.avatar="https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",t}return Object(c["a"])(o,[{key:"save",value:function(t){this.avatar=t}},{key:"close",value:function(){console.log("close")}}]),o}(u["e"]);F=Object(p["a"])([Object(u["a"])({components:{VueImgCrop:T}})],F);var I=F,W=I,P=(o("2c54"),Object(j["a"])(W,a,r,!1,null,"770f8b70",null)),R=P.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(R)}}).$mount("#app")},"2c54":function(t,e,o){"use strict";var i=o("dfd0"),a=o.n(i);a.a},"302a":function(t,e,o){var i=o("4795");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("1b73a3b8",i,!0,{sourceMap:!1,shadowMode:!1})},"474a":function(t,e,o){"use strict";var i=o("d7fc"),a=o.n(i);a.a},4795:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,".crop-img[data-v-c94c68cc],.crop-img img[data-v-c94c68cc]{width:100%;height:100%}.crop-wrap[data-v-c94c68cc]{height:100px;position:relative;margin:auto;box-sizing:border-box;background:#ccc}.crop-wrap img[data-v-c94c68cc]{width:100%;height:100%}.crop-box[data-v-c94c68cc]{position:absolute;z-index:2}.crop-box__move[data-v-c94c68cc]{width:100%;height:100%;border:2px solid hsla(0,0%,100%,.6);box-sizing:border-box;background:transparent;cursor:move}.crop-box .zoom-box[data-v-c94c68cc]{position:absolute;right:-3px;bottom:-3px;width:5px;height:5px;background:#fff;cursor:se-resize}.cover-wrap[data-v-c94c68cc]{left:0;width:100%;background:transparent;z-index:1}.cover-box[data-v-c94c68cc],.cover-wrap[data-v-c94c68cc]{position:absolute;top:0;height:100%}.cover-box[data-v-c94c68cc]{background:rgba(0,0,0,.5)}",""]),t.exports=e},"58d0":function(t,e,o){"use strict";var i=o("703c"),a=o.n(i);a.a},"703c":function(t,e,o){var i=o("fe53");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("12127e58",i,!0,{sourceMap:!1,shadowMode:!1})},a966:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAARNJREFUeNptj20rRFEUhY/XMozXQaLJN03JTET5X/waJUV7XVuD20wyutMoirx8EBERPiBJ8guudU7duWO6+8Nu7/Wss3bHyAwq5QGTUNtDCLRgUJUQ59rXjHUYVySBKWVwzeHUTzdiGcUN1UsdtFEjuOVyrD0RLo7JHZWznf66gHsJ5bCUctuEPBCf/Dur43ikWNUuzcoTzUfRydiSxbO1yAt7rdKd8C1M4lVC4oCnkkqn8OYM/kVHAvZy+CA8kHf2Yq29GU/LJ8Gudno5N21qW2N4Qb4objHame0mG2FrhOfwTQFxrJe3CtbCFosX5IfLehzpLLNWlRVaUOawWo+LLfPyy4dLxk97y/QllC7K/l7vH26Cp59gcejfAAAAAElFTkSuQmCC"},b5ea:function(t,e,o){"use strict";var i=o("302a"),a=o.n(i);a.a},d7fc:function(t,e,o){var i=o("dfcc");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("4bfccca6",i,!0,{sourceMap:!1,shadowMode:!1})},dfcc:function(t,e,o){var i=o("24fb"),a=o("1de5"),r=o("a966");e=i(!1);var n=a(r);e.push([t.i,".upload-cover[data-v-cf60fe18]{z-index:1000;width:100%;height:100%;opacity:.7;background-color:#000}.upload-cover[data-v-cf60fe18],.upload-dialog[data-v-cf60fe18]{position:fixed;top:0;right:0;bottom:0;left:0}.upload-dialog[data-v-cf60fe18]{z-index:1002;margin:auto;width:546px;height:500px;background:#fff}.upload-wrap[data-v-cf60fe18]{padding:0 54px;text-align:center}.upload .title[data-v-cf60fe18]{position:relative;font-size:20px;color:#333;padding:19px 0;margin:0 30px;border-bottom:1px solid #f3f3f3}.upload .icon-close[data-v-cf60fe18]{cursor:pointer;position:absolute;top:20px;right:-10px;display:block;width:16px;height:16px;background:url("+n+")}.save-btn[data-v-cf60fe18]{margin:27px auto 0;width:340px;height:46px;line-height:46px;background:#409eff;border-radius:2px;font-size:16px;color:#fff;text-align:center;border:none;cursor:pointer}.save-btn[data-v-cf60fe18]:hover{background:#0d84ff}",""]),t.exports=e},dfd0:function(t,e,o){var i=o("20ff");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=o("499e").default;a("29d6cc5f",i,!0,{sourceMap:!1,shadowMode:!1})},fe53:function(t,e,o){var i=o("24fb");e=i(!1),e.push([t.i,'.local-upload[data-v-505b6920]:after{content:"";display:table;clear:both}.local-upload input[type=file][data-v-505b6920]{position:absolute;top:-9999px;left:-9999px;width:0;height:0;opacity:0}.local-wrap[data-v-505b6920]{width:416px;height:310px;border:1px solid #ececec;float:left;background:#f5f5f5}.local-wrap__img[data-v-505b6920]{position:relative;width:416px;height:310px;margin:auto;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.upload-select[data-v-505b6920]{margin:117px auto 20px;width:136px;height:40px;background:#fff;box-shadow:0 0 10px 0 hsla(0,0%,83.5%,.5);border-radius:2px}.upload-select__inner[data-v-505b6920]{display:block;width:136px;height:40px;cursor:pointer;line-height:40px;text-align:center;font-size:14px;color:#409eff}.upload-select__inner[data-v-505b6920]:hover{background:#f3f9ff}.tip-limit[data-v-505b6920]{margin:0;font-size:13px;color:#666;text-align:center}.tip-error[data-v-505b6920]{margin-top:30%;color:#f94848;font-size:14px}',""]),t.exports=e}});